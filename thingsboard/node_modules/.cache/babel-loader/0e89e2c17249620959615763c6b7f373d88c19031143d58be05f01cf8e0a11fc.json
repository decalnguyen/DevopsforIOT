{"ast":null,"code":"var _jsxFileName = \"/home/toan/Devops_for_iot/thingsboard/src/components/DataExplorer/DataExplorer.js\",\n  _s = $RefreshSig$();\nimport classNames from 'classnames/bind';\nimport styles from \"./DataExplorer.module.scss\";\nimport Table from \"../Table\";\nimport { useEffect, useState } from 'react';\nimport { getAttributesData, getDevicesInfo, getTimeseriesData } from \"../../services/request\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cx = classNames.bind(styles);\nfunction DataExplorer() {\n  _s();\n  const {\n    token,\n    platform,\n    username\n  } = useAuth();\n  const [timeSeriesData, setTimeSeriesData] = useState([]);\n  const [attributesData, setAttributesData] = useState([]);\n  useEffect(() => {\n    const fetchData = async () => {\n      console.log('token: ', token);\n      const deviceInfos = await getDevicesInfo({\n        token,\n        platform\n      });\n      console.log('deviceInfos:', deviceInfos);\n      if (!deviceInfos) return;\n      const devices = deviceInfos.map(device => {\n        const current = device.id;\n        return {\n          entityType: current.entityType,\n          entityId: current.id\n        };\n      });\n      console.log(devices);\n      const timeSeriesDataPromises = devices.map(async device => {\n        const {\n          entityType,\n          entityId\n        } = device;\n        const data = await getTimeseriesData({\n          entityType,\n          entityId,\n          token,\n          platform\n        });\n        return data;\n      });\n      const attributesDataPromises = devices.map(async device => {\n        const {\n          entityType,\n          entityId\n        } = device;\n        const data = await getAttributesData({\n          entityType,\n          entityId,\n          token,\n          platform\n        });\n        return data;\n      });\n      const timeSeriesData = await Promise.all(timeSeriesDataPromises);\n      const attributesData = await Promise.all(attributesDataPromises);\n      setTimeSeriesData(timeSeriesData);\n      setAttributesData(attributesData);\n      console.log('attributes: ', attributesData);\n      console.log('timeseries: ', timeSeriesData);\n    };\n    fetchData();\n  }, [token, platform, username]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: cx('wrapper'),\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      data: attributesData,\n      type: \"attribute\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      data: timeSeriesData,\n      type: \"timeSeries\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(DataExplorer, \"h91wGgIJKZLPX8NdLV+z1rfMTzE=\", false, function () {\n  return [useAuth];\n});\n_c = DataExplorer;\nexport default DataExplorer;\nvar _c;\n$RefreshReg$(_c, \"DataExplorer\");","map":{"version":3,"names":["classNames","styles","Table","useEffect","useState","getAttributesData","getDevicesInfo","getTimeseriesData","useAuth","jsxDEV","_jsxDEV","cx","bind","DataExplorer","_s","token","platform","username","timeSeriesData","setTimeSeriesData","attributesData","setAttributesData","fetchData","console","log","deviceInfos","devices","map","device","current","id","entityType","entityId","timeSeriesDataPromises","data","attributesDataPromises","Promise","all","className","children","type","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/toan/Devops_for_iot/thingsboard/src/components/DataExplorer/DataExplorer.js"],"sourcesContent":["import classNames from 'classnames/bind';\nimport styles from './DataExplorer.module.scss';\nimport Table from '~/components/Table';\nimport { useEffect, useState } from 'react';\nimport { getAttributesData, getDevicesInfo, getTimeseriesData } from '~/services/request';\nimport { useAuth } from '~/contexts/AuthContext';\n\nconst cx = classNames.bind(styles);\n\nfunction DataExplorer() {\n  const { token, platform, username } = useAuth();\n  const [timeSeriesData, setTimeSeriesData] = useState([]);\n  const [attributesData, setAttributesData] = useState([]);\n  useEffect(() => {\n    const fetchData = async () => {\n      console.log('token: ', token);\n      const deviceInfos = await getDevicesInfo({ token, platform });\n      console.log('deviceInfos:', deviceInfos);\n      if (!deviceInfos) return;\n      const devices = deviceInfos.map((device) => {\n        const current = device.id;\n        return {\n          entityType: current.entityType,\n          entityId: current.id,\n        };\n      });\n      console.log(devices);\n      const timeSeriesDataPromises = devices.map(async (device) => {\n        const { entityType, entityId } = device;\n        const data = await getTimeseriesData({ entityType, entityId, token, platform });\n        return data;\n      });\n      const attributesDataPromises = devices.map(async (device) => {\n        const { entityType, entityId } = device;\n        const data = await getAttributesData({ entityType, entityId, token, platform });\n        return data;\n      });\n      const timeSeriesData = await Promise.all(timeSeriesDataPromises);\n      const attributesData = await Promise.all(attributesDataPromises);\n      setTimeSeriesData(timeSeriesData);\n      setAttributesData(attributesData);\n      console.log('attributes: ', attributesData);\n      console.log('timeseries: ', timeSeriesData);\n    };\n    fetchData();\n  }, [token, platform, username]);\n\n  return (\n    <div className={cx('wrapper')}>\n      <Table data={attributesData} type=\"attribute\" />\n      <Table data={timeSeriesData} type=\"timeSeries\" />\n    </div>\n  );\n}\n\nexport default DataExplorer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}